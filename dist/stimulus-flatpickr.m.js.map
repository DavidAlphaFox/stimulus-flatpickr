{"version":3,"file":"stimulus-flatpickr.m.js","sources":["../src/utils.js","../src/config_options.js","../src/events.js","../src/elements.js","../src/strftime_mapping.js","../src/stimulus-flatpickr.js"],"sourcesContent":["export const kebabCase = string =>\n  string\n    .replace(/([a-z])([A-Z])/g, \"$1-$2\")\n    .replace(/[\\s_]+/g, \"-\")\n    .toLowerCase();\n\nexport const capitalize = string => {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n};\n","const booleanOptions = [\n  \"allowInput\",\n  \"altInput\",\n  \"animate\",\n  \"clickOpens\",\n  \"closeOnSelect\",\n  \"disableMobile\",\n  \"enableSeconds\",\n  \"enableTime\",\n  \"inline\",\n  \"noCalendar\",\n  \"shorthandCurrentMonth\",\n  \"static\",\n  \"time_24hr\",\n  \"weekNumbers\",\n  \"wrap\"\n];\n\nconst stringOptions = [\n  \"altInputClass\",\n  \"conjunction\",\n  \"defaultDate\",\n  \"mode\",\n  \"nextArrow\",\n  \"position\",\n  \"prevArrow\"\n];\n\nconst numberOptions = [\n  \"defaultHour\",\n  \"defaultMinute\",\n  \"defaultSeconds\",\n  \"hourIncrement\",\n  \"minuteIncrement\",\n  \"showMonths\"\n];\n\nconst arrayOptions = [\n  \"disable\",\n  \"enable\",\n  \"disableDaysOfWeek\",\n  \"enableDaysOfWeek\"\n];\n\nconst dateOptions = [\"maxDate\", \"minDate\", \"maxTime\", \"minTime\", \"now\"];\n\nexport const dateFormats = [\"altFormat\", \"ariaDateFormat\", \"dateFormat\"];\n\nexport const options = {\n  string: stringOptions,\n  boolean: booleanOptions,\n  date: dateOptions,\n  array: arrayOptions,\n  number: numberOptions\n};\n","export const events = [\n  \"change\",\n  \"open\",\n  \"close\",\n  \"monthChange\",\n  \"yearChange\",\n  \"ready\",\n  \"valueUpdate\",\n  \"dayCreate\"\n];\n","export const elements = [\n  \"calendarContainer\",\n  \"currentYearElement\",\n  \"days\",\n  \"daysContainer\",\n  \"input\",\n  \"nextMonthNav\",\n  \"monthNav\",\n  \"prevMonthNav\",\n  \"rContainer\",\n  \"selectedDateElem\",\n  \"todayDateElem\",\n  \"weekdayContainer\"\n];\n","export const mapping = {\n  \"%Y\": \"Y\",\n  \"%y\": \"y\",\n  \"%C\": \"Y\",\n  \"%m\": \"m\",\n  \"%-m\": \"n\",\n  \"%_m\": \"n\",\n  \"%B\": \"F\",\n  \"%^B\": \"F\",\n  \"%b\": \"M\",\n  \"%^b\": \"M\",\n  \"%h\": \"M\",\n  \"%^h\": \"M\",\n  \"%d\": \"d\",\n  \"%-d\": \"j\",\n  \"%e\": \"j\",\n  \"%H\": \"H\",\n  \"%k\": \"H\",\n  \"%I\": \"h\",\n  \"%l\": \"h\",\n  \"%P\": \"K\",\n  \"%p\": \"K\",\n  \"%M\": \"i\",\n  \"%S\": \"S\",\n  \"%A\": \"l\",\n  \"%a\": \"D\",\n  \"%w\": \"w\"\n};\n\nconst strftimeRegex = new RegExp(\n  Object.keys(mapping)\n    .join(\"|\")\n    .replace(new RegExp(\"\\\\^\", \"g\"), \"\\\\^\"),\n  \"g\"\n);\n\nexport const convertDateFormat = format => {\n  return format.replace(strftimeRegex, match => {\n    return mapping[match];\n  });\n};\n","import { Controller } from \"stimulus\";\nimport flatpickr from \"flatpickr\";\nimport { kebabCase, capitalize } from \"./utils\";\nimport { options, dateFormats } from \"./config_options\";\nimport { events } from \"./events\";\nimport { elements } from \"./elements\";\nimport { convertDateFormat } from \"./strftime_mapping\";\n\nclass Flatpickr extends Controller {\n  initialize() {\n    this.config = {};\n  }\n\n  connect() {\n    this._initializeEvents();\n    this._initializeOptions();\n    this._initializeDateFormats();\n\n    this.fp = flatpickr(this.element, {\n      ...this.config\n    });\n\n    this._initializeElements();\n  }\n\n  disconnect() {\n    this.fp.destroy();\n  }\n\n  _initializeEvents() {\n    events.forEach(event => {\n      if (this[event]) {\n        const hook = `on${capitalize(event)}`;\n        this.config[hook] = this[event].bind(this);\n      }\n    });\n  }\n\n  _initializeOptions() {\n    Object.keys(options).forEach(optionType => {\n      const optionsCamelCase = options[optionType];\n      optionsCamelCase.forEach(option => {\n        const optionKebab = kebabCase(option);\n        if (this.data.has(optionKebab)) {\n          this.config[option] = this[`_${optionType}`](optionKebab);\n        }\n      });\n    });\n    this._handleDaysOfWeek();\n  }\n\n  _handleDaysOfWeek() {\n    if (this.config.disableDaysOfWeek) {\n      this.config.disableDaysOfWeek = this._validateDaysOfWeek(\n        this.config.disableDaysOfWeek\n      );\n      this.config.disable = [\n        ...(this.config.disable || []),\n        this._disable.bind(this)\n      ];\n    }\n\n    if (this.config.enableDaysOfWeek) {\n      this.config.enableDaysOfWeek = this._validateDaysOfWeek(\n        this.config.enableDaysOfWeek\n      );\n      this.config.enable = [\n        ...(this.config.enable || []),\n        this._enable.bind(this)\n      ];\n    }\n  }\n\n  _validateDaysOfWeek(days) {\n    if (Array.isArray(days)) {\n      return days.map(day => parseInt(day));\n    } else {\n      console.error(\"days of week must be a valid array\");\n      return [];\n    }\n  }\n\n  _disable(date) {\n    const disabledDays = this.config.disableDaysOfWeek;\n    return disabledDays.includes(date.getDay());\n  }\n\n  _enable(date) {\n    const enabledDays = this.config.enableDaysOfWeek;\n    return enabledDays.includes(date.getDay());\n  }\n\n  _initializeDateFormats() {\n    dateFormats.forEach(dateFormat => {\n      if (this.data.has(dateFormat)) {\n        this.config[dateFormat] = convertDateFormat(this.data.get(dateFormat));\n      }\n    });\n  }\n\n  _initializeElements() {\n    elements.forEach(element => {\n      this[`${element}Target`] = this.fp[element];\n    });\n  }\n\n  _string(option) {\n    return this.data.get(option);\n  }\n\n  _date(option) {\n    return this.data.get(option);\n  }\n\n  _boolean(option) {\n    return this.data.get(option) === \"true\";\n  }\n\n  _array(option) {\n    return JSON.parse(this.data.get(option));\n  }\n\n  _number(option) {\n    return parseInt(this.data.get(option));\n  }\n}\n\nexport default Flatpickr;\n"],"names":["const","this"],"mappings":"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"}